# Analysis Scripts

Organized collection of pharmaceutical research analysis scripts generated by the pharma-search-specialist agent.

## Directory Structure

```
scripts/analysis/
├── obesity/                    # Obesity clinical trials analysis
│   ├── obesity_pipeline_analysis.py
│   └── obesity_active_pipeline_analysis.py
├── [future]/                   # Additional therapeutic area analyses
└── README.md
```

## Usage

### Obesity Pipeline Analysis

**All Trials Analysis:**
```bash
python3 scripts/analysis/obesity/obesity_pipeline_analysis.py
```

**Active Trials Only (Recruiting + Active Not Recruiting):**
```bash
python3 scripts/analysis/obesity/obesity_active_pipeline_analysis.py
```

**Save Results to data_dump:**
```bash
mkdir -p data_dump/$(date +%Y-%m-%d)_obesity_pipeline
python3 scripts/analysis/obesity/obesity_pipeline_analysis.py > data_dump/$(date +%Y-%m-%d)_obesity_pipeline/all_trials.txt
python3 scripts/analysis/obesity/obesity_active_pipeline_analysis.py > data_dump/$(date +%Y-%m-%d)_obesity_pipeline/active_trials.txt
```

## Analysis Output Structure

Each analysis script generates:
- **Phase distribution** - Breakdown by clinical trial phase
- **Status distribution** - Trial status (recruiting, active, completed, etc.)
- **Sponsor analysis** - Industry vs academic/other sponsorship
- **Drug class analysis** - Key therapeutic agents and mechanisms
- **Strategic insights** - Competitive landscape assessment
- **Key takeaways** - Actionable competitive intelligence

## MCP Integration

All scripts use the MCP (Model Context Protocol) client pattern for querying ClinicalTrials.gov:

```python
from mcp.client import get_client

client = get_client('ct-gov-mcp')
result = client.call_tool('ct_gov_studies', {
    'method': 'search',
    'condition': 'obesity',
    'status': 'recruiting',
    'location': 'United States',
    'pageSize': 10
})
```

## Adding New Analysis Scripts

When creating new analysis scripts:

1. **Organize by therapeutic area:**
   ```bash
   mkdir -p scripts/analysis/<therapeutic_area>
   ```

2. **Use descriptive naming:**
   - `<condition>_pipeline_analysis.py` - Full pipeline
   - `<condition>_active_pipeline_analysis.py` - Active trials only
   - `<condition>_competitive_landscape.py` - Competitive analysis
   - `<condition>_sponsor_analysis.py` - Sponsor-focused analysis

3. **Include standard sections:**
   - Phase distribution
   - Status distribution
   - Sponsor analysis
   - Key drug/intervention analysis
   - Strategic insights

4. **Follow the MCP pattern:**
   - Import from `scripts/mcp.client`
   - Use `get_client()` helper
   - Extract counts with regex patterns
   - Handle comma-formatted numbers

5. **Save results to data_dump:**
   ```bash
   data_dump/<YYYY-MM-DD>_<condition>_<analysis_type>/
   ```

## Script Templates

See existing obesity scripts for templates:
- `scripts/analysis/obesity/obesity_pipeline_analysis.py` - Basic pipeline template
- `scripts/analysis/obesity/obesity_active_pipeline_analysis.py` - Advanced analysis with strategic insights

## Dependencies

- Python 3.x
- MCP client (`scripts/mcp/client.py`)
- ClinicalTrials.gov MCP server configured in `.mcp.json`

## Notes

- All scripts execute via MCP servers (no direct API calls)
- Results are cached by MCP servers for efficiency
- Token optimization via small pageSize (10) for counting
- Regex patterns handle comma-formatted numbers (e.g., "5,665")
