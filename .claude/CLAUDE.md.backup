# Pharmaceutical Research Intelligence Repository

## Overview
This is an atomic agent architecture for pharmaceutical competitive intelligence. The approach breaks down complex analysis into single-responsibility agents coordinated by Claude Code.

## MCP Servers Configuration
Located in `.mcp.json`:
- **toolrow-mcp-server**: ClinicalTrials.gov, PubMed, FDA databases, SEC EDGAR filings, WHO health data, medical coding
- **healthcare-mcp**: CMS Medicare provider and claims data
- **financials-mcp-server**: Yahoo Finance & FRED economic data
- **datacommons-mcp**: Population statistics, disease prevalence, healthcare infrastructure data
- **patents-mcp-server**: USPTO patent search and retrieval for prior art analysis and FTO assessment
- **opentargets-mcp-server**: Genetic evidence, target validation, disease associations, approved drug precedents
- **pubchem-mcp-server**: Compound properties, structural alerts, drug-likeness, ADME predictions, CMC benchmarks

## Atomic Agent Architecture

### Philosophy
define the philosophy here

### Atomic Agents (2 given, others to be implemented)

**pharma-orchestrator** (Orchestration):
- Analyzes user queries to identify information needs
- Creates structured JSON search plans
- Identifies required databases and specialist delegations
- **Tools**: Read only (no MCP tools, no Write)
- **Output**: Plain text JSON search plan

**pharma-search-specialist** (Search Guidance Assistant):
- Analyzes queries to recommend optimal MCP tools and parameters
- **DOES NOT execute searches** - provides guidance only
- **Tools**: Read only (no MCP tools in agent file, though Task invocation grants access)
- **Output**: JSON guidance with tool names, methods, parameters, and interpretation hints
- **Critical**: Agent provides STRATEGY, Claude Code performs EXECUTION
- **Guidance Format**:

### Orchestration Workflow

Claude Code coordinates all agents using file-based communication, for example:

```
1. Data Gathering Phase
   └─> Claude Code invokes pharma-search-specialist for guidance
       └─> Specialist returns: JSON with {tool, method, parameters, interpretation_guide}
   └─> Claude Code executes MCP queries DIRECTLY
       ├─> mcp__toolrow-mcp-server__fda_info (with specialist's parameters)
       │   └─> Claude Code sees RAW FDA response → Saves: data_dump/2025-10-05_143000_fda_rybelsus/
       ├─> mcp__toolrow-mcp-server__ct_gov_studies (with specialist's parameters)
       │   └─> Claude Code sees RAW ClinicalTrials.gov response → Saves: data_dump/2025-10-05_143100_ct_glp1_trials/
       └─> mcp__toolrow-mcp-server__pubmed_articles (with specialist's parameters)
           └─> Claude Code sees RAW PubMed response → Saves: data_dump/2025-10-05_143200_pubmed_oral_glp1/

2. Specialist Analysis (if needed)
   └─> If search plan flagged market sizing, epidemiology, etc.
       └─> Claude Code invokes specialist agents
           └─> Saves: temp/market_sizing_oral_glp1.md

3. Competitive Analysis Phase
   └─> Claude Code invokes pharma-landscape-competitive-analyst
       ├─> Reads: data_dump/fda_rybelsus/, ct_glp1_trials/, pubmed_oral_glp1/
       └─> Returns: Plain text markdown competitive analysis
       ├─> Claude Code saves: temp/competitive_analysis_oral_glp1.md

4. BD Opportunity Screening Phase
   └─> Claude Code invokes pharma-landscape-opportunity-identifier
       ├─> Reads: temp/competitive_analysis_oral_glp1.md
       └─> Returns: Plain text markdown BD opportunity list
       ├─> Claude Code saves: temp/bd_opportunities_oral_glp1.md

5. Strategic Synthesis Phase
   └─> Claude Code invokes pharma-landscape-strategy-synthesizer
       ├─> Reads: temp/competitive_analysis_oral_glp1.md
       ├─> Reads: temp/bd_opportunities_oral_glp1.md
       ├─> Reads: temp/market_sizing_oral_glp1.md (if available)
       └─> Returns: Plain text markdown strategic recommendations
       ├─> Claude Code saves: temp/strategy_oral_glp1.md

6. Compilation Phase
   └─> Claude Code invokes pharma-report-compiler
       ├─> Reads: temp/competitive_analysis_oral_glp1.md
       ├─> Reads: temp/bd_opportunities_oral_glp1.md
       ├─> Reads: temp/strategy_oral_glp1.md
       ├─> Reads: temp/market_sizing_oral_glp1.md (if available)
       └─> Returns: Complete executive report

7. Final Output
   └─> Claude Code writes report to reports/ folder
```

### Key Design Principles

**1. Single Responsibility**
- Each agent has ONE clear job (orchestrating, analyst, analyzing, formatting)
- No scope creep (synthesizer can't size markets, compiler can't analyze)

**2. Data-Driven Communication**
- Agents communicate via `data_dump/` and `temp/` files (not delegation)
- Clear audit trail (all data sources preserved)

**3. Claude Code Orchestration**
- Parent agent coordinates all workflow
- No agent autonomy ("should I delegate?" → Claude Code decides)

**4. No File Writing by Sub-Agents**
- Agents return plain text markdown/JSON
- Claude Code handles ALL file operations
- Prevents format issues and scope violations

**5. Predictable Behavior**
- No autonomous decisions
- No format surprises
- Clear input/output contracts

### Claude Code Search Execution Protocol
to be defined

### File Organization

**data_dump/** - Search results
```
data_dump/{YYYY-MM-DD}_{HHMMSS}_{entity_type}_{search_terms}/
  query.json          # Original query parameters
  results.json        # Raw API response
  summary.md          # Human-readable summary
  metadata.json       # Timestamp, token usage, record count
```

**temp/** - Intermediate analysis (workflow artifacts)
```
temp/
  competitive_analysis_oral_glp1.md  # From pharma-landscape-competitive-analyst
  bd_opportunities_oral_glp1.md      # From pharma-landscape-opportunity-identifier
  strategy_oral_glp1.md              # From pharma-landscape-strategy-synthesizer
  market_sizing_oral_glp1.md         # From specialist agents (if needed)
```

**reports/** - Final deliverables (Claude Code writes)
```
reports/
  oral_glp1_competitive_landscape_20251005.md
```

### Benefits of Atomic Architecture

✅ **File Writing**: No agents have Write tool → physically impossible to write files
✅ **Easier testing**: Test each atomic agent independently
✅ **Composability**: Reuse atomic agents for different workflows
✅ **Audit trail**: All data sources and intermediate outputs preserved
✅ **Debugging**: Inspect intermediate outputs at each phase

## Data Export Protocol

### Data Export Policy

### Export Files Structure

**query.json** - Original search parameters
**results.json** - Full raw API response
**summary.md** - Human-readable key findings
**metadata.json** - Timestamp, token usage, record count

## Common Workflows

### Example: Competitive Landscape Analysis

**User Request**: "Analyze competitive landscape for oral GLP-1 agonists"

**Workflow**:
1. Claude Code invokes `pharma-search-orchestrator`
   - Returns: JSON search plan (FDA, ClinicalTrials.gov, PubMed queries)

2. Claude Code executes searches via `pharma-search-specialist`
   - Agent returns results, Claude Code saves to: `data_dump/2025-10-05_143000_fda_rybelsus/`
   - Agent returns results, Claude Code saves to: `data_dump/2025-10-05_143100_ct_glp1_trials/`
   - Agent returns results, Claude Code saves to: `data_dump/2025-10-05_143200_pubmed_oral_glp1/`

3. Claude Code invokes `pharma-landscape-competitive-analyst`
   - Reads all data_dump/ folders
   - Returns: Competitive analysis markdown
   - Claude Code saves to: `temp/competitive_analysis_oral_glp1.md`

4. Claude Code invokes `pharma-landscape-opportunity-identifier`
   - Reads: temp/competitive_analysis_oral_glp1.md
   - Returns: BD opportunity list markdown
   - Claude Code saves to: `temp/bd_opportunities_oral_glp1.md`

5. Claude Code invokes `pharma-landscape-strategy-synthesizer`
   - Reads: temp/competitive_analysis_oral_glp1.md, temp/bd_opportunities_oral_glp1.md
   - Returns: Strategic recommendations markdown
   - Claude Code saves to: `temp/strategy_oral_glp1.md`

6. Claude Code invokes `pharma-report-compiler`
   - Reads: temp/competitive_analysis_oral_glp1.md, temp/bd_opportunities_oral_glp1.md, temp/strategy_oral_glp1.md
   - Returns: Executive report markdown

7. Claude Code writes final report
   - Writes: `reports/oral_glp1_competitive_landscape_20251005.md`

## Implementation Status
